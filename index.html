<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home - Brand</title>
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,400,700">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ionicons/2.0.1/css/ionicons.min.css">
</head>

<body>
    <nav class="navbar navbar-dark navbar-expand-lg fixed-top bg-white portfolio-navbar gradient">
        <div class="container"><a class="navbar-brand logo" href="#">CryptoRPS</a><button class="navbar-toggler" data-toggle="collapse" data-target="#navbarNav"><span class="sr-only">Toggle navigation</span><span class="navbar-toggler-icon"></span></button>
            <div class="collapse navbar-collapse"
                id="navbarNav">
                <ul class="nav navbar-nav ml-auto"></ul>
            </div>
        </div>
    </nav>
    <main class="page lanidng-page">
        <section class="portfolio-block block-intro"><img src="assets/img/rps/rps.jpg" style="width:600px;">
            <div class="container">
                <div class="about-me">
                    <p><br>Want to test your rock paper scissors ability and win ethereum? CryptoRPS is a decentralized application which allows users to do that exact thing. Will you outsmart our AI?</p><a class="btn btn-outline-primary" role="button" href="#">Play</a></div>
            </div>
        </section>
        <section class="portfolio-block photography"></section>
        <section class="portfolio-block skills">
            <div class="container">
                <div class="heading">
                    <h2>Features</h2>
                </div>
                <div class="row">
                    <div class="col-md-4">
                        <div class="card special-skill-item border-0">
                            <div class="card-header bg-transparent border-0"><i class="icon ion-ios-star-outline"></i></div>
                            <div class="card-body">
                                <h3 class="card-title">Blockchain</h3>
                                <p class="card-text">Our application is on the ethereum blockchain meaning that all of your transactions are secure. Rest assured.</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card special-skill-item border-0">
                            <div class="card-header bg-transparent border-0"><i class="icon ion-social-bitcoin-outline"></i></div>
                            <div class="card-body">
                                <h3 class="card-title">Cryptocurrency</h3>
                                <p class="card-text">Win real cryptocurrency in the form of ethereum. How rich will you get?</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card special-skill-item border-0">
                            <div class="card-header bg-transparent border-0"><i class="icon ion-ios-gear-outline"></i></div>
                            <div class="card-body">
                                <h3 class="card-title">Artificial Intelligence</h3>
                                <p class="card-text">We utilize an advanced rock paper scissors artificial intelligence that learns against your every move. Try to outsmart it, we dare you.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>
    <section class="portfolio-block website gradient">
        <div class="container">
            <div class="row">
                <div class="col-md-4"><img id="rock" src="assets/img/rps/rock.png"></div>
                <div class="col-md-4"><img id="paper" src="assets/img/rps/paper.png"></div>
                <div class="col-md-4"><img id="scissors" src="assets/img/rps/scissors.png"></div>
            </div>
        </div>
    </section>
    <footer class="page-footer">
        <div class="container">
            <div class="links"></div>
            <div class="social-icons"><a href="#"><i class="icon ion-social-facebook"></i></a><a href="#"><i class="icon ion-social-instagram-outline"></i></a><a href="#"><i class="icon ion-social-twitter"></i></a></div>
        </div>
    </footer>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.1/js/bootstrap.bundle.min.js"></script>
    <script src="assets/js/script.min.js"></script>
    <script>
    if (typeof web3 !== 'undefined') {
      web3 = new Web3(web3.currentProvider);
    } else {
      web3 = new Web3(new Web3.providers.HttpProviders('http://localhost:8545'));
    }
    // Set Account
    web3.eth.defaultAccount = web3.eth.accounts[0];
    // Set Contract Abi
    var contractAbi = [
	{
		"constant": false,
		"inputs": [
			{
				"name": "choice",
				"type": "string"
			}
		],
		"name": "play",
		"outputs": [
			{
				"name": "w",
				"type": "int256"
			}
		],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [],
		"name": "register",
		"outputs": [],
		"payable": true,
		"stateMutability": "payable",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [
			{
				"name": "choice",
				"type": "string"
			}
		],
		"name": "setPlayer2Choice",
		"outputs": [
			{
				"name": "x",
				"type": "bool"
			}
		],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "constructor"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "AmIPlayer1",
		"outputs": [
			{
				"name": "x",
				"type": "bool"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "AmIPlayer2",
		"outputs": [
			{
				"name": "x",
				"type": "bool"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "checkBothNotNull",
		"outputs": [
			{
				"name": "x",
				"type": "bool"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "getContractBalance",
		"outputs": [
			{
				"name": "amount",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "getMyBalance",
		"outputs": [
			{
				"name": "amount",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "getWinner",
		"outputs": [
			{
				"name": "x",
				"type": "int256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "player1Choice",
		"outputs": [
			{
				"name": "",
				"type": "string"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "player2Choice",
		"outputs": [
			{
				"name": "",
				"type": "string"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "whoIsPlayer1",
		"outputs": [
			{
				"name": "x",
				"type": "address"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	}
];
    // Set Contract Address
    var contractAddress = '0xd1293ccd8dda4f290617df1163b54ba37864ea4c';
    // Set the Contract
    var contract = web3.eth.contract(contractAbi).at(contractAddress);
    console.log(contract)

    function register(){
      var weiValue = web3.toWei(5,'ether');
      contract.register({from: web3.eth.accounts[0], value: weiValue}, function(err, res){console.log(res,err)})
    }
    function play(move){
      contract.play(move, function(err, res){console.log(res,err)})
    }

      var map = {"R": "rock", "S": "scissors", "P": "paper"}
      $("#rock").click(function(){
        play("rock")
        $.get("http://localhost:8080/R", function( data ) {
          alert("AI plays: "+map[data]);
        });
      })
      $("#paper").click(function(){
        play("paper")
        $.get("http://localhost:8080/P", function( data ) {
          alert("AI plays: "+map[data]);
        });
      })
      $("#scissors").click(function(){
        play("scissors")
        $.get("http://localhost:8080/S", function( data ) {
          alert("AI plays: "+map[data]);
        });
      })
    </script>
</body>

</html>
